{"version":3,"sources":["features/cart/components/TableCartItem/index.js","features/cart/pages/ShowToCart/index.js","features/cart/pages/PayPage/index.js","features/cart/index.js"],"names":["TableCartItem","id","name","cost","quantity","img","soluong","read","dispatch","useDispatch","useState","quantityInput","setQuantityInput","useEffect","quantityRequired","e","val","$","target","Swal","fire","item","updateCart","className","to","src","alt","title","toLocaleString","onSubmit","preventDefault","blur","type","value","onChange","onBlur","readOnly","min","colSpan","onClick","destroyItem","bind","this","ShowToCart","window","scrollTo","items","useSelector","cartSelector","document","toTal","reduce","total","width","map","SoLuong","PayPage","user","userSelector","location","useHistory","isEmptyObject","wal","replace","TenKH","DiaChi","email","NgaySinh","DienThoai","length","data","MaKH","payBill","unwrap","then","res","code","success","error","cart","Err404","React","lazy","fallback","Header","exact","from","path","component","Footer"],"mappings":"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","file":"static/js/10.36c11e33.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { destroyItem, updateCart } from '../../../../app/reducers/cartSlice'\r\nimport $ from 'jquery'\r\nimport Swal from 'sweetalert2'\r\n\r\nexport default function TableCartItem({ id, name, cost, quantity, img, soluong, read }) {\r\n    const dispatch = useDispatch()\r\n    const deleteSignItem = (id) => {\r\n        dispatch(destroyItem(id))\r\n    }\r\n\r\n    const [quantityInput, setQuantityInput] = useState('')\r\n\r\n    useEffect(() => {\r\n        setQuantityInput(quantity)\r\n    }, [])\r\n\r\n    const quantityRequired = e => {\r\n        let val = $(e.target).val()\r\n        if (val < 1) {\r\n            Swal.fire('Cảnh báo','<h1>Số lượng mua tối thiểu là 1</h1>','warning')\r\n            $(e.target).val(1)\r\n            val = 1\r\n        }\r\n        if (val > soluong) {\r\n            Swal.fire('Cảnh báo','<h1>Số lượng mua tối thiểu là ' + soluong+'</h1>','warning')\r\n            $(e.target).val(soluong)\r\n            val = soluong\r\n        }\r\n        if (val > 0 && val <= soluong) {\r\n            const item = {\r\n                id,\r\n                quantity: val\r\n            }\r\n            dispatch(updateCart(item))\r\n        }\r\n    }\r\n    const updateToCart = e => {\r\n        e.preventDefault()\r\n        $('input').blur()\r\n        // const item = {\r\n        //     id,\r\n        //     quantity: quantityInput\r\n        // }\r\n        // dispatch(updateCart(item))\r\n    }\r\n    return (\r\n        <tr className=\"table-cart-item\">\r\n            <td>\r\n                <Link to={`/detail/products?id=${id}`} className=\"cart-item-name text-decoration-none\">\r\n                    <img src={`/assets/images/product/${img}`} alt={name} className=\"cart-item-img\" />\r\n                </Link>\r\n            </td>\r\n            <td>\r\n                <Link to={`/detail/products?id=${id}`} title={name} className=\"cart-item-name text-decoration-none\">{name}</Link>\r\n            </td>\r\n            <td>\r\n                <span className=\"cart-item-cost\">{cost.toLocaleString()}đ</span>\r\n            </td>\r\n            <td>\r\n                <form id=\"formUpdate\" onSubmit={updateToCart}>\r\n                    {\r\n                        read ?\r\n                            <input type=\"number\" name=\"quantity\" value={quantityInput}\r\n                                onChange={e => { setQuantityInput(e.target.value) }} onBlur={quantityRequired} readOnly />\r\n                            :\r\n                            <input type=\"number\" min=\"1\" name=\"quantity\" value={quantityInput}\r\n                                onChange={e => { setQuantityInput(e.target.value) }} onBlur={quantityRequired} />\r\n                    }\r\n                </form>\r\n            </td>\r\n            {\r\n                read ?\r\n                    <td colSpan=\"2\">\r\n                        <span className=\"cart-item-cost\">{(cost * quantity).toLocaleString()}đ</span>\r\n                    </td>\r\n                    : <>\r\n                        <td>\r\n                            <span className=\"cart-item-cost\">{(cost * quantity).toLocaleString()}đ</span>\r\n                        </td>\r\n                        <td>\r\n                            <button className=\"cart-item-delete\">\r\n                                <span className=\" material-icons-outlined\" onClick={deleteSignItem.bind(this, id)} >\r\n                                    delete\r\n                                </span>\r\n                            </button>\r\n                        </td>\r\n                    </>\r\n            }\r\n        </tr>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { cartSelector } from '../../../../app/reducers/cartSlice'\r\nimport TableCartItem from '../../components/TableCartItem'\r\nimport './ShowToCart.css'\r\n\r\nfunction ShowToCart() {\r\n    window.scrollTo(0,0)\r\n    const items = useSelector(cartSelector)\r\n    document.title = \"Giỏ hàng\"\r\n    let toTal = items.reduce((total, item) => {\r\n        return total + item.cost * item.quantity;\r\n    }, 0)\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 mt-5 mb-5\">\r\n                    <table className=\"table table-cart\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width=\"10%\">Ảnh</th>\r\n                                <th width=\"35%\">Tên sản phẩm</th>\r\n                                <th width=\"15%\">Đơn giá</th>\r\n                                <th width=\"15%\">Số lượng</th>\r\n                                <th width=\"15%\">Tổng</th>\r\n                                <th width=\"10%\">Thao tác</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {items.map(item => {\r\n                                return <TableCartItem key={item.id} id={item.id} name={item.name} cost={item.cost}\r\n                                    quantity={item.quantity} img={item.img} soluong={item.SoLuong}/>\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                    <div className=\"note\">\r\n                        <p>Hỗ trợ ship 20k cho đơn hàng từ 300k nội thành HN, HCM</p>\r\n                        <p>Hỗ trợ ship 30k cho đơn hàng từ 500k toàn quốc</p>\r\n                        <p>Đơn hàng trên website được xử lý trong giờ hành chính</p>\r\n                    </div>\r\n                    <div className=\"cart-total text-end\">\r\n                        <div className=\"total d-block\">\r\n                            Tổng: {toTal.toLocaleString()}<sub>đ</sub>\r\n                        </div>\r\n                        <div className=\"clearfix\"></div>\r\n                        <Link className=\"btn btn-lg btn-pink btn-radius\" to=\"/shop\">Tiếp tục mua sắm</Link>\r\n                        <Link className=\"ms-3 btn btn-lg btn-pink btn-outline-pink btn-radius\" to=\"/cart/pay\">Thanh toán</Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShowToCart\r\n","import { isEmptyObject } from 'jquery'\r\nimport React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\nimport wal from 'sweetalert2'\r\nimport { cartSelector, payBill } from '../../../../app/reducers/cartSlice'\r\nimport { userSelector } from '../../../../app/reducers/userSlice'\r\nimport TableCartItem from '../../components/TableCartItem'\r\n\r\nfunction PayPage() {\r\n    document.title = \"Thanh toán\"\r\n    const items = useSelector(cartSelector)\r\n    const user = useSelector(userSelector)\r\n    const location = useHistory()\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        if (isEmptyObject(user)) {\r\n            wal.fire('Thông Báo!','<h1>Bạn phải đăng nhập để thanh toán!!! <3</h1>','warning')\r\n            location.replace('/user/signin')\r\n        }\r\n        window.scrollTo(0, 0)\r\n    }, [location.location])\r\n\r\n    let toTal = items.reduce((total, item) => {\r\n        return total + item.cost * item.quantity;\r\n    }, 0)\r\n\r\n    const pay = () => {\r\n        if (items.length <= 0) {\r\n            location.replace('/')\r\n            return\r\n        }\r\n        const data = {\r\n            MaKH: user.MaKH,\r\n            items,\r\n            total: toTal\r\n        }\r\n        dispatch(payBill(data)).unwrap()\r\n            .then(res => {\r\n                if (res.code === 200) {\r\n                    wal.fire('Success!',res.success,'success')\r\n                    location.replace('/')\r\n                }\r\n                else wal.fire('Error!',res.error,'error')\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h2 className=\"text-center m-4\">THÔNG TIN NGƯỜI ĐẶT</h2>\r\n                    <table className=\"table table-cart\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width=\"20%\">Họ tên</th>\r\n                                <th width=\"35%\">Địa chỉ</th>\r\n                                <th width=\"15%\">Email</th>\r\n                                <th width=\"15%\">Ngày Sinh</th>\r\n                                <th width=\"15%\">Điện thoại</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr className=\"table-cart-item\">\r\n                                <td>{user.TenKH}</td>\r\n                                <td>{user.DiaChi}</td>\r\n                                <td>{user.email}</td>\r\n                                <td>{user.NgaySinh}</td>\r\n                                <td>{user.DienThoai}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <tbody>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                    <h2 className=\"text-center m-4\">THÔNG TIN MẶT HÀNG</h2>\r\n                    <table className=\"table table-cart\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width=\"15%\">Ảnh</th>\r\n                                <th width=\"40%\">Tên sản phẩm</th>\r\n                                <th width=\"15%\">Đơn giá</th>\r\n                                <th width=\"15%\">Số lượng</th>\r\n                                <th width=\"15%\">Tổng</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                            {items.map(item => {\r\n                                return <TableCartItem key={item.id} id={item.id} name={item.name} cost={item.cost}\r\n                                    quantity={item.quantity} img={item.img} soluong={item.SoLuong} read={true} />\r\n                            })}\r\n                            <tr className=\"table-cart-item\">\r\n                                <td colSpan=\"5\">\r\n                                    <div className=\"total text-end d-block\">\r\n                                        Tổng: {toTal.toLocaleString()}<sub>đ</sub>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <div className=\"text-end\">\r\n                        <div className=\"ms-3 btn btn-lg btn-pink btn-outline-pink btn-radius\" onClick={pay}>Xác nhận đặt hàng</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PayPage\r\n","import React, { Suspense } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Redirect, Route, Switch } from 'react-router'\r\nimport ShowToCart from './pages/ShowToCart'\r\nimport PayPage from './pages/PayPage'\r\nimport Header from '../../components/Header'\r\nimport Footer from '../../components/Footer'\r\n\r\nfunction cart() {\r\n    const Err404 = React.lazy(() => import('../../components/404'))\r\n    return (\r\n        <Suspense fallback={\r\n            <div id=\"preloader\">\r\n                <div id=\"loader\"></div>\r\n            </div>\r\n        }>\r\n            <Header/>\r\n            <Switch>\r\n                <Redirect exact from=\"/cart\" to=\"/cart/show\" />\r\n                <Route path=\"/cart/show\" component={ShowToCart} />\r\n                <Route path=\"/cart/pay\" component={PayPage} />\r\n                <Route component={Err404} />\r\n            </Switch>\r\n            <Footer />\r\n        </Suspense>\r\n    )\r\n}\r\n\r\ncart.propTypes = {\r\n\r\n}\r\n\r\nexport default cart\r\n\r\n"],"sourceRoot":""}